{"version":3,"sources":["../../../../app/events/EventsClient.tsx/__nextjs-internal-proxy.mjs","../../../../app/%5Blocale%5D/events/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/events/EventsClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/events/EventsClient.tsx\",\n    \"default\",\n);\n","import fs from \"fs/promises\";\r\nimport path from \"path\";\r\nimport EventsClient from \"@/app/events/EventsClient\";\r\nimport { Event } from \"@/data/types\";\r\nimport { defaultLocale, locales, type Locale } from \"@/i18n.config\";\r\n\r\nasync function getEvents(): Promise<Event[]> {\r\n  try {\r\n    const filePath = path.join(process.cwd(), \"data\", \"events.json\");\r\n    const fileContent = await fs.readFile(filePath, \"utf-8\");\r\n    const events: Event[] = JSON.parse(fileContent);\r\n    return dedupeEvents(events)\r\n      .filter(isUpcoming)\r\n      .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction isUpcoming(event: Event): boolean {\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n  const endOrStart = event.endDate\r\n    ? new Date(event.endDate)\r\n    : new Date(event.date);\r\n  return endOrStart >= today;\r\n}\r\n\r\nfunction dedupeEvents(events: Event[]): Event[] {\r\n  const seen = new Set<string>();\r\n  const result: Event[] = [];\r\n\r\n  for (const ev of events) {\r\n    const key = ev.url || \"\" || `${ev.title}-${ev.date}`;\r\n    const altKey = `${ev.title}-${ev.date}`;\r\n    if (seen.has(key) || seen.has(altKey)) continue;\r\n    seen.add(key);\r\n    seen.add(altKey);\r\n    result.push(ev);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport default async function EventsPage({\r\n  params,\r\n}: {\r\n  params: Promise<{ locale: string }>;\r\n}) {\r\n  const { locale: localeParam } = await params;\r\n  const locale: Locale = locales.includes(localeParam as Locale)\r\n    ? (localeParam as Locale)\r\n    : defaultLocale;\r\n  const events = await getEvents();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-brand-black text-white\">\r\n      <div className=\"container mx-auto px-4 py-12\">\r\n        <div className=\"mb-10\">\r\n          <h1 className=\"text-4xl md:text-5xl font-display font-black mb-2\">\r\n            {locale === \"pt\" ? \"Eventos\" : \"Events\"}\r\n          </h1>\r\n          <p className=\"text-brand-grey\">\r\n            {locale === \"pt\"\r\n              ? \"Descobre os melhores eventos em Lisboa\"\r\n              : \"Discover the best events in Lisbon\"}\r\n          </p>\r\n        </div>\r\n        <EventsClient events={events} locale={locale} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"ieAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,6RAA+R,EAC5T,4DACA,gEAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,yQAA2Q,EACxS,wCACA,8GCLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAEA,eAAe,IACb,GAAI,CACF,IAAM,EAAW,EAAA,OAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAI,OAAQ,eAC5C,EAAc,MAAM,EAAA,OAAE,CAAC,QAAQ,CAAC,EAAU,SAC1C,EAAkB,KAAK,KAAK,CAAC,GACnC,MAAO,CAiBX,SAAS,AAAa,CAAe,EACnC,IAAM,EAAO,IAAI,IACX,EAAkB,EAAE,CAE1B,IAAK,IAAM,KAAM,EAAQ,CACvB,IAAM,EAAM,EAAG,GAAG,EAAU,CAAA,CAAN,CAAS,EAAG,KAAK,CAAC,CAAC,EAAE,EAAG,IAAI,CAAA,CAAE,CAC9C,EAAS,CAAA,EAAG,EAAG,KAAK,CAAC,CAAC,EAAE,EAAG,IAAI,CAAA,CAAE,CACnC,EAAK,GAAG,CAAC,IAAQ,EAAK,GAAG,CAAC,KAC9B,EAAK,EADkC,CAC/B,CAAC,GACT,EAAK,GAAG,CAAC,GACT,EAAO,IAAI,CAAC,GACd,CAEA,OAAO,EACT,EA/BwB,GACjB,MAAM,CAAC,GACP,IAAI,CAAC,CAAC,EAAG,IAAM,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,GAAK,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,GACzE,CAAE,KAAM,CACN,MAAO,EAAE,AACX,CACF,CAEA,SAAS,EAAW,CAAY,EAC9B,IAAM,EAAQ,IAAI,KAKlB,OAJA,EAAM,QAAQ,CAAC,EAAG,EAAG,EAAG,GAIjB,IAFC,KADW,EAAM,OAAO,CACnB,EAAT,AAAe,OAAO,CACb,EAAM,CAAf,GAAmB,CAAf,EACa,CACvB,CAkBe,eAAe,EAAW,QACvC,CAAM,CAGP,EACC,GAAM,CAAE,OAAQ,CAAW,CAAE,CAAG,MAAM,EAChC,EAAiB,EAAA,OAAO,CAAC,QAAQ,CAAC,GACnC,EACD,EAAA,aAAa,CACX,EAAS,MAAM,IAErB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6DACA,OAAX,EAAkB,UAAY,WAEjC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2BACC,OAAX,EACG,yCACA,0CAGR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAY,CAAA,CAAC,OAAQ,EAAQ,OAAQ,QAI9C","ignoreList":[0]}