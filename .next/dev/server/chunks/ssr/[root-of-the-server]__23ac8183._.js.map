{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/EMPRESA/what-to-do-website/context/AudioContext.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useRef,\r\n  ReactNode,\r\n  useEffect,\r\n} from \"react\";\r\n\r\nexport interface IEpisode {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  audioUrl: string;\r\n  imageUrl?: string;\r\n  duration?: string;\r\n}\r\n\r\ninterface AudioContextType {\r\n  isPlaying: boolean;\r\n  currentEpisode: IEpisode | null;\r\n  currentTime: number;\r\n  duration: number;\r\n  togglePlay: () => void;\r\n  playEpisode: (episode: IEpisode) => void;\r\n  seek: (time: number) => void;\r\n  closePlayer: () => void;\r\n}\r\n\r\nconst AudioContext = createContext<AudioContextType | undefined>(undefined);\r\n\r\nfunction hasPlayableAudioSource(source?: string) {\r\n  if (!source) return false;\r\n  return /\\.(mp3|wav|ogg|m4a|aac|webm)(\\?.*)?$/i.test(source);\r\n}\r\n\r\nexport function AudioProvider({ children }: { children: ReactNode }) {\r\n  const [currentEpisode, setCurrentEpisode] = useState<IEpisode | null>(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n\r\n  // Initialize audio element once\r\n  useEffect(() => {\r\n    if (!audioRef.current) {\r\n      audioRef.current = new Audio();\r\n    }\r\n\r\n    const audio = audioRef.current;\r\n\r\n    const handleTimeUpdate = () => setCurrentTime(audio.currentTime);\r\n    const handleLoadedMetadata = () => setDuration(audio.duration);\r\n    const handleEnded = () => setIsPlaying(false);\r\n\r\n    audio.addEventListener(\"timeupdate\", handleTimeUpdate);\r\n    audio.addEventListener(\"loadedmetadata\", handleLoadedMetadata);\r\n    audio.addEventListener(\"ended\", handleEnded);\r\n\r\n    return () => {\r\n      audio.removeEventListener(\"timeupdate\", handleTimeUpdate);\r\n      audio.removeEventListener(\"loadedmetadata\", handleLoadedMetadata);\r\n      audio.removeEventListener(\"ended\", handleEnded);\r\n    };\r\n  }, []);\r\n\r\n  // Handle play/pause logic when dependencies change\r\n  useEffect(() => {\r\n    const audio = audioRef.current;\r\n    if (\r\n      !audio ||\r\n      !currentEpisode ||\r\n      !hasPlayableAudioSource(currentEpisode.audioUrl)\r\n    )\r\n      return;\r\n\r\n    // If source changed, update it\r\n    // Store current src to compare? Alternatively compare episode IDs\r\n    // But HTMLAudioElement.src is absolute path, let's just coordinate carefully.\r\n\r\n    // We handle source setting in playEpisode\r\n\r\n    if (isPlaying) {\r\n      audio.play().catch((e) => {\r\n        console.warn(\"Playback unavailable for current source\");\r\n        setIsPlaying(false);\r\n      });\r\n    } else {\r\n      audio.pause();\r\n    }\r\n  }, [isPlaying, currentEpisode]);\r\n\r\n  const playEpisode = (episode: IEpisode) => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n    if (!hasPlayableAudioSource(episode.audioUrl)) {\r\n      setCurrentEpisode(episode);\r\n      setIsPlaying(false);\r\n      return;\r\n    }\r\n\r\n    // If it's a new episode\r\n    if (currentEpisode?.id !== episode.id) {\r\n      audio.src = episode.audioUrl;\r\n      setCurrentEpisode(episode);\r\n      setCurrentTime(0);\r\n      setIsPlaying(true);\r\n    } else {\r\n      // Same episode, just toggle play if it was paused\r\n      if (!isPlaying) setIsPlaying(true);\r\n    }\r\n  };\r\n\r\n  const togglePlay = () => {\r\n    if (!currentEpisode) return;\r\n    setIsPlaying((prev) => !prev);\r\n  };\r\n\r\n  const seek = (time: number) => {\r\n    const audio = audioRef.current;\r\n    if (audio) {\r\n      audio.currentTime = time;\r\n      setCurrentTime(time);\r\n    }\r\n  };\r\n\r\n  const closePlayer = () => {\r\n    const audio = audioRef.current;\r\n    if (audio) {\r\n      audio.pause();\r\n      audio.currentTime = 0;\r\n    }\r\n    setIsPlaying(false);\r\n    setCurrentEpisode(null);\r\n  };\r\n\r\n  return (\r\n    <AudioContext.Provider\r\n      value={{\r\n        isPlaying,\r\n        currentEpisode,\r\n        currentTime,\r\n        duration,\r\n        togglePlay,\r\n        playEpisode,\r\n        seek,\r\n        closePlayer,\r\n      }}\r\n    >\r\n      {children}\r\n    </AudioContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAudio() {\r\n  const context = useContext(AudioContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useAudio must be used within an AudioProvider\");\r\n  }\r\n  return context;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AA+BA,MAAM,6BAAe,IAAA,sNAAa,EAA+B;AAEjE,SAAS,uBAAuB,MAAe;IAC7C,IAAI,CAAC,QAAQ,OAAO;IACpB,OAAO,wCAAwC,IAAI,CAAC;AACtD;AAEO,SAAS,cAAc,EAAE,QAAQ,EAA2B;IACjE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAkB;IACtE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,MAAM,WAAW,IAAA,+MAAM,EAA0B;IAEjD,gCAAgC;IAChC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,SAAS,OAAO,EAAE;YACrB,SAAS,OAAO,GAAG,IAAI;QACzB;QAEA,MAAM,QAAQ,SAAS,OAAO;QAE9B,MAAM,mBAAmB,IAAM,eAAe,MAAM,WAAW;QAC/D,MAAM,uBAAuB,IAAM,YAAY,MAAM,QAAQ;QAC7D,MAAM,cAAc,IAAM,aAAa;QAEvC,MAAM,gBAAgB,CAAC,cAAc;QACrC,MAAM,gBAAgB,CAAC,kBAAkB;QACzC,MAAM,gBAAgB,CAAC,SAAS;QAEhC,OAAO;YACL,MAAM,mBAAmB,CAAC,cAAc;YACxC,MAAM,mBAAmB,CAAC,kBAAkB;YAC5C,MAAM,mBAAmB,CAAC,SAAS;QACrC;IACF,GAAG,EAAE;IAEL,mDAAmD;IACnD,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,SAAS,OAAO;QAC9B,IACE,CAAC,SACD,CAAC,kBACD,CAAC,uBAAuB,eAAe,QAAQ,GAE/C;QAEF,+BAA+B;QAC/B,kEAAkE;QAClE,8EAA8E;QAE9E,0CAA0C;QAE1C,IAAI,WAAW;YACb,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC;gBAClB,QAAQ,IAAI,CAAC;gBACb,aAAa;YACf;QACF,OAAO;YACL,MAAM,KAAK;QACb;IACF,GAAG;QAAC;QAAW;KAAe;IAE9B,MAAM,cAAc,CAAC;QACnB,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,CAAC,OAAO;QACZ,IAAI,CAAC,uBAAuB,QAAQ,QAAQ,GAAG;YAC7C,kBAAkB;YAClB,aAAa;YACb;QACF;QAEA,wBAAwB;QACxB,IAAI,gBAAgB,OAAO,QAAQ,EAAE,EAAE;YACrC,MAAM,GAAG,GAAG,QAAQ,QAAQ;YAC5B,kBAAkB;YAClB,eAAe;YACf,aAAa;QACf,OAAO;YACL,kDAAkD;YAClD,IAAI,CAAC,WAAW,aAAa;QAC/B;IACF;IAEA,MAAM,aAAa;QACjB,IAAI,CAAC,gBAAgB;QACrB,aAAa,CAAC,OAAS,CAAC;IAC1B;IAEA,MAAM,OAAO,CAAC;QACZ,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,OAAO;YACT,MAAM,WAAW,GAAG;YACpB,eAAe;QACjB;IACF;IAEA,MAAM,cAAc;QAClB,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,OAAO;YACT,MAAM,KAAK;YACX,MAAM,WAAW,GAAG;QACtB;QACA,aAAa;QACb,kBAAkB;IACpB;IAEA,qBACE,8OAAC,aAAa,QAAQ;QACpB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/EMPRESA/what-to-do-website/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///C:/EMPRESA/what-to-do-website/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///C:/EMPRESA/what-to-do-website/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}